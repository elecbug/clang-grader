# syntax=docker/dockerfile:1

FROM debian:bookworm-slim

# Install toolchain, C standard library headers, and Python
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
        build-essential python3 python3-pip ca-certificates time && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /app

COPY grade_runner.py /app/grade_runner.py
COPY grade_runner/ /app/grade_runner/

ENV CFLAGS="-O2 -std=c17 -Wall -Wextra" \
    BIN_OUT="/work/a.out"

ENTRYPOINT ["python3", "/app/grade_runner.py"]
